"""
Промпты для LLM-as-a-judge оценки.
"""

PROMPT_RELEVANCE = """Ты — эксперт по оценке качества ответов в системах вопрос-ответ.

Задача: оценить релевантность ответа вопросу.

Вопрос: {question}

Ответ: {answer}

Оцени, насколько ответ релевантен вопросу. Релевантность означает, что ответ напрямую отвечает на вопрос и содержит полезную информацию.

Верни ТОЛЬКО валидный JSON в следующем формате:
{{
  "relevance": <float от 0.0 до 1.0>,
  "explanation": "<краткое объяснение оценки на русском языке>"
}}

Где:
- relevance: оценка релевантности (0.0 = не релевантен, 1.0 = полностью релевантен)
- explanation: краткое объяснение оценки

Верни ТОЛЬКО JSON, без дополнительного текста."""

PROMPT_FAITHFULNESS = """Ты — эксперт по оценке качества ответов в системах вопрос-ответ.

Задача: оценить правдивость (faithfulness) ответа относительно предоставленных контекстов.

Контексты:
{contexts}

Ответ: {answer}

Оцени, насколько ответ основан на предоставленных контекстах и не содержит выдуманной информации (галлюцинаций).

Верни ТОЛЬКО валидный JSON в следующем формате:
{{
  "faithfulness": <float от 0.0 до 1.0>,
  "hallucinated_claims": [<список утверждений из ответа, которые не подтверждаются контекстами>]
}}

Где:
- faithfulness: оценка правдивости (0.0 = много галлюцинаций, 1.0 = полностью основан на контекстах)
- hallucinated_claims: список конкретных утверждений из ответа, которые не подтверждаются контекстами (если есть)

Верни ТОЛЬКО JSON, без дополнительного текста."""

PROMPT_COMPLETENESS = """Ты — эксперт по оценке качества ответов в системах вопрос-ответ.

Задача: оценить полноту ответа относительно вопроса.

Вопрос: {question}

Ответ: {answer}

Контексты:
{contexts}

Оцени, насколько полно ответ покрывает вопрос. Полный ответ должен:
1. Отвечать на все аспекты вопроса
2. Использовать релевантную информацию из контекстов
3. Не оставлять важные части вопроса без ответа

Верни ТОЛЬКО валидный JSON в следующем формате:
{{
  "completeness": <float от 0.0 до 1.0>,
  "explanation": "<краткое объяснение оценки на русском языке>"
}}

Где:
- completeness: оценка полноты (0.0 = ответ неполный, 1.0 = полностью отвечает на вопрос)
- explanation: краткое объяснение оценки

Верни ТОЛЬКО JSON, без дополнительного текста."""

PROMPT_OFF_TOPIC = """Ты — эксперт по оценке качества ответов в системах вопрос-ответ.

Задача: оценить, насколько много в ответе лишней информации, которая не относится к запросу.

Вопрос: {question}

Ответ: {answer}

Оцени, сколько в ответе информации, которая не относится к вопросу. Например, если пользователь спросил про Озон, а ответ содержит информацию про Сбербанк - это лишняя информация.

Верни ТОЛЬКО валидный JSON в следующем формате:
{{
  "off_topic_rate": <float от 0.0 до 1.0>,
  "off_topic_claims": [<список конкретных утверждений из ответа, которые не относятся к вопросу, если есть>]
}}

Где:
- off_topic_rate: оценка лишней информации (0.0 = нет лишней информации, 1.0 = много лишней информации, не относящейся к вопросу)
- off_topic_claims: список конкретных утверждений из ответа, которые не относятся к вопросу (если есть)

Верни ТОЛЬКО JSON, без дополнительного текста."""

PROMPT_ALL_METRICS = """Ты — эксперт по оценке качества ответов в системах вопрос-ответ.

Задача: оценить ответ по всем метрикам качества одновременно.

Вопрос: {question}

Ответ: {answer}

Контексты:
{contexts}

Оцени ответ по следующим метрикам:

1. **Relevance (Релевантность)**: Насколько ответ релевантен вопросу (0.0 = не релевантен, 1.0 = полностью релевантен)

2. **Faithfulness (Правдивость)**: Насколько ответ основан на предоставленных контекстах и не содержит выдуманной информации (0.0 = много галлюцинаций, 1.0 = полностью основан на контекстах)

3. **Completeness (Полнота)**: Насколько полно ответ покрывает вопрос (0.0 = ответ неполный, 1.0 = полностью отвечает на вопрос)

4. **Off-topic Rate (Лишняя информация)**: Насколько много в ответе информации, которая не относится к вопросу (0.0 = нет лишней информации, 1.0 = много лишней информации, не относящейся к вопросу). Например, если пользователь спросил про Озон, а ответ содержит информацию про Сбербанк - это лишняя информация. Контексты для этой метрики не важны.

Верни ТОЛЬКО валидный JSON в следующем формате:
{{
  "relevance": <float от 0.0 до 1.0>,
  "faithfulness": <float от 0.0 до 1.0>,
  "completeness": <float от 0.0 до 1.0>,
  "off_topic_rate": <float от 0.0 до 1.0>,
}}

Где:
- relevance: оценка релевантности ответа вопросу
- faithfulness: оценка правдивости (насколько ответ основан на контекстах)
- completeness: оценка полноты ответа
- off_topic_rate: оценка лишней информации (0.0 = нет лишней информации, 1.0 = много лишней информации)

Верни ТОЛЬКО JSON, без дополнительного текста."""

